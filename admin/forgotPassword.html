<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-Hwg6XBnFJlEKDUI8eSxHI3ONRo02MZP5h3+AoDZm39g=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="design_files/fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
    <link rel="stylesheet" href="design_files/css/style.css">
    <script src="https://www.gstatic.com/firebasejs/6.0.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.0.1/firebase-auth.js"></script>
</head>
<body>
    <div class="wrapper" style="background-image: url('design_files/images/forgetpasswordcover.jpg');">
        <div class="inner">
            <div class="image-holder">
                <img src="design_files/images/forget password.jpg" alt="">
            </div>
            <form id="forgot-password-form">
                <h3>Forgot Password?</h3>
                <div class="form-group">
                   <p style="text-align: justify;">
                     Please enter your email address below and we will send you information to recover your account.</p>
                </div>
                <div class="form-wrapper">
                    <input id="email" type="text" placeholder="Email Address" class="form-control">
                    <i class="zmdi zmdi-email"></i>
                </div>
                <div class="form-group container-login100-form-btn">
                    <button id="btn-resetPassword" type="button">
                      Reset Password
                        <i class="zmdi zmdi-arrow-right"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyCp2e7CNo83HwDx_HAVgY_IDh0_KW2Y0HI",
            authDomain: "y-spot-e84ca.firebaseapp.com",
            databaseURL: "https://y-spot-e84ca-default-rtdb.firebaseio.com",
            projectId: "y-spot-e84ca",
            storageBucket: "y-spot-e84ca.appspot.com",
            messagingSenderId: "783996806068",
            appId: "1:783996806068:web:298ca1ddb4dfb7e758c8e1",
            measurementId: "G-TSH2JVYJHR"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Reset Password
        document.getElementById('btn-resetPassword').addEventListener('click', function () {
            var email = document.getElementById('email').value;

            if (email) {
                firebase.auth().sendPasswordResetEmail(email)
                    .then(() => {
                        alert('Password reset email sent!');
                    })
                    .catch((error) => {
                        var errorCode = error.code;
                        var errorMessage = error.message;
                        console.error(errorCode, errorMessage);
                        alert("Error: " + errorMessage);
                    });
            } else {
                alert("Please fill out all fields.");
            }
        });

        // Redirect if already logged in
        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {
                window.location.href = "./MainPage.html";
            }
        });
    </script>
</body>
</html>
